<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />

    <title>Docker - testing</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">testing</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">Docker</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1664798291433"
                  >2022-10-03 13:58</time
                ></span
              >
              <span
                >Updated At：<time datetime="1664799543558"
                  >2022-10-03 14:19</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="docker">Docker</h1>
<p><a href="/article/Docker">Docker</a><br />
<a>System</a><br />
<a>GIT</a><br />
<a href="/article/Linux">Linux</a></p>
<p><em>REQUIREMENT: Cloned Git-Repository which includes a DockerFile and Dockercompose (.yml) file</em></p>
<ul>
<li>Setting up the environment</li>
<li>Using the environment</li>
<li>Closing the environment</li>
<li>Common errors &amp; solutions</li>
</ul>
<h2 id="setting-the-environment">Setting the environment</h2>
<ol>
<li>Using a terminal, navigate to the folder which contains the Dockerfile (it should be the main folder of the repository)</li>
<li>Build the Dockerfile with the below code snippet.</li>
</ol>
<p><em>The Dockerfile should be a plaintext file called "Dockerfile"</em></p>
<div><pre class="hljs"><code>sudo docker build -t [name]:[version]            <span class="hljs-comment">#e.g. canopus:1.0</span></code></pre></div>
<ol start="3">
<li>Using the same terminal, use the below code snippet to initialize all the containers through a docker-compose (.yml) file.</li>
</ol>
<p><em>The Dockercompose file can be named however you like, but should use the .yml extension.</em></p>
<div><pre class="hljs"><code>sudo docker-compose -f docker-compose.yml up     <span class="hljs-comment">#-f flags allows for monitoring all containers in terminal</span></code></pre></div>
<h2 id="using-the-environment">Using the environment</h2>
<ol>
<li>Open a new terminal and enter the following commands:</li>
</ol>
<p><em>These commands are made for a container running 3.10-slim (Linux)</em></p>
<div><pre class="hljs"><code>sudo docker <span class="hljs-built_in">exec</span> -it [container name] /bin/bash <span class="hljs-comment">#e.g. sudo docker exec -it canopus /bin/bash</span></code></pre></div>
<ol start="2">
<li>In the same terminal (which is now a terminal within the container) navigate to the desired folder and run a file/program.</li>
</ol>
<div><pre class="hljs"><code><span class="hljs-built_in">cd</span> path/path &amp; program file.ext                 <span class="hljs-comment">#e.g. cd app &amp; python3 main.py</span></code></pre></div>
<h2 id="closing-the-environment">Closing the environment</h2>
<ol>
<li>Using the terminal which is running the docker-compose, enter <code>CTRL+C</code>. This terminates all running containers.</li>
<li>Enter the following command:</li>
</ol>
<div><pre class="hljs"><code>sudo docker-compose down                        <span class="hljs-comment">#add --remove-orphans if you want to clean everything</span></code></pre></div>
<ol start="3">
<li>Next time when starting the environment, you only have to do the <code>docker-compose up</code> from setting up the environment step 3</li>
</ol>
<h2 id="common-errors-solutions">Common errors &amp; solutions</h2>
<ul>
<li>Ports used in dockercompose file are already occupied</li>
</ul>
<h3 id="ports-used-in-dockercompose-file-are-already-occupied">Ports used in dockercompose file are already occupied</h3>
<ol>
<li>Open a new terminal</li>
<li>Identify program that is using the port</li>
</ol>
<div><pre class="hljs"><code>sudo lsof -i:[port]                             <span class="hljs-comment">#e.g. sudo lsof -i:2181</span></code></pre></div>
<p>This should return something like this:</p>
<div><pre class="hljs"><code>COMMAND PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
java    854 kafka  122u  IPv6  31313      0t0  TCP *:2181 (LISTEN)</code></pre></div>
<ol start="3">
<li>Terminate program that is using the port (decide at own discretion)</li>
</ol>
<div><pre class="hljs"><code>sudo <span class="hljs-built_in">kill</span> [PID]                                 <span class="hljs-comment">#e.g. sudo kill 854</span></code></pre></div>
<ol start="4">
<li>Close terminal</li>
</ol>
<hr />
</div>
      </article>
    </div>
  </body>
</html>
